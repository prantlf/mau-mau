"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _chooseCard(e){var t=this;return new Promise(function(n,a){var r=t.game.rules.pickPlayableCards(e.hand),u=e.hand.pickCards(function(e){return r.indexOf(e)<0}).map(function(e){return new _inquirer2["default"].Separator(_i18n2["default"].translate("Hold $[1]",e))}),i=r.map(function(e){return{name:_i18n2["default"].translate("Play $[1]",e),value:e}}),o=t.game.playingStack.peekAtTopCard(),s=o.rank===_Ranks2["default"].queen&&t.game.rules.chosenSuit?_i18n2["default"].translate(" and chooses $[1]",_i18n2["default"].translate(t.game.rules.chosenSuit)):"";t.game.players.forEach(function(e){console.log("  "+_i18n2["default"].translate("$[1] holds $[2] cards",e,e.hand.cardCount))}),console.log("  "+_i18n2["default"].translate("$[1] is on playing stack",o)+s),console.log("  ------------------------------"),r.length&&u.length&&i.unshift(new _inquirer2["default"].Separator),_inquirer2["default"].prompt([{name:"chosenCard",type:"list",message:_i18n2["default"].translate("$[1], choose a card to play or draw a new one",e),choices:u.concat(i,new _inquirer2["default"].Separator,{name:_i18n2["default"].translate("Draw new card"),value:null})}],function(r){if(r.chosenCard){var u=r.chosenCard;u.rank===_Ranks2["default"].queen&&e.hand.cardCount>1?chooseSuit.call(t).then(function(){n(u)}):n(u)}else a()})})}function chooseSuit(){var e=this;return new Promise(function(t){_inquirer2["default"].prompt([{name:"chosenSuit",type:"list",message:_i18n2["default"].translate("Choose a suit"),choices:[{name:_i18n2["default"].translate(_Suits2["default"].hearts),value:_Suits2["default"].hearts},{name:_i18n2["default"].translate(_Suits2["default"].bells),value:_Suits2["default"].bells},{name:_i18n2["default"].translate(_Suits2["default"].acorns),value:_Suits2["default"].acorns},{name:_i18n2["default"].translate(_Suits2["default"].leaves),value:_Suits2["default"].leaves}]}],function(n){e.game.rules.chosenSuit=n.chosenSuit,t()})})}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(exports,"__esModule",{value:!0});var _Prompt2=require("../../engine/game/Prompt"),_Prompt3=_interopRequireDefault(_Prompt2),_Ranks=require("../../engine/cards/Ranks"),_Ranks2=_interopRequireDefault(_Ranks),_Suits=require("../../engine/cards/Suits"),_Suits2=_interopRequireDefault(_Suits),_inquirer=require("inquirer"),_inquirer2=_interopRequireDefault(_inquirer),_i18n=require("../../engine/misc/i18n"),_i18n2=_interopRequireDefault(_i18n),ConsolePrompt=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"chooseCard",value:function(e){return _chooseCard.call(this,e)}}]),t}(_Prompt3["default"]);exports["default"]=ConsolePrompt;
//# sourceMappingURL=ConsolePrompt.js.map
