"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _Ranks=require("../cards/Ranks"),_Ranks2=_interopRequireDefault(_Ranks),_Deck=require("../cards/Deck"),_Deck2=_interopRequireDefault(_Deck),_Player=require("../players/Player"),_Player2=_interopRequireDefault(_Player),_EventEmitter2=require("./EventEmitter"),_EventEmitter3=_interopRequireDefault(_EventEmitter2),_i18n=require("./i18n"),_i18n2=_interopRequireDefault(_i18n),Reporter=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this)),a=!1,n=null;return e.on("game:starting",function(){r.emit("reporter:message",_i18n2["default"].translate("$[1] players started with $[2] cards ($[3] card decks)",e.players.length,e.deck.cardCount,e.deck.cardCount/_Deck2["default"].cardCount))}).on("game:started",function(){r.emit("reporter:message",_i18n2["default"].translate("each player was dealt with $[1] cards",e.rules.cardsPerPlayer)+", "+_i18n2["default"].translate("$[1] is on playing stack",e.playingStack.peekAtTopCard())),a=!0}).on("game:finished",function(t){r.emit("reporter:message",{playerIndex:e.players.indexOf(t),important:!0,message:_i18n2["default"].translate("$[1] won",t)})}),e.players.forEach(function(t){t.hand.on("cards:dropped",function(s){if(a){var i=s[0],o=i.rank===_Ranks2["default"].queen&&e.rules.chosenSuit?_i18n2["default"].translate(" and chose $[1]",_i18n2["default"].translate(e.rules.chosenSuit)):"";r.emit("reporter:message",{playerIndex:e.players.indexOf(t),message:_i18n2["default"].translate("$[1] played $[2]",t,i)+o}),t!==n&&(n=null)}}).on("cards:received",function(s){a&&t!==n&&(r.emit("reporter:message",{playerIndex:e.players.indexOf(t),message:_i18n2["default"].translate("$[1] drew a card",t)}),n=null)})}),e.rules.on("rule:take-turn",function(){e.players.indexOf(e.currentPlayer)||r.emit("reporter:message",{divider:!0,message:"---"})}).on("rule:pause",function(){var t=e.currentPlayer;r.emit("reporter:message",{playerIndex:e.players.indexOf(t),message:_i18n2["default"].translate("$[1] had to pause",t)})}).on("rule:take-two",function(){var t=e.currentPlayer;r.emit("reporter:message",{playerIndex:e.players.indexOf(t),message:_i18n2["default"].translate("$[1] had to draw two cards",t)}),n=t}),r}return _inherits(t,e),t}(_EventEmitter3["default"]);exports["default"]=Reporter;
//# sourceMappingURL=Reporter.js.map
