{"version":3,"sources":["engine/game/Game.js"],"names":["Game","options","initializeRules","call","initializePlayers","initializeDeck","initializePrompt","drawingStack","on","checkForStacksTurnOver","bind","emit","cards","deck","drawAllCards","shuffleCards","putCardsToBottom","dealCards","playingStack","putCardOnTop","drawCardFromTop","Object","freeze","players","setTimeout","nextTurn","player","prompt","chooseCard","cardCount","card","removeAllListeners","rules","forEach","hand","constructor","cardsPerPlayer","playersPerPack","activePlayers","currentPlayerIndex","attachGame","defaultCardsPerPlayer","defaultPlayersPerPack","continueToEnd","undefined","defaultContinueToEnd","push","slice","firstWinner","extraPacks","Math","trunc","length","usedCards","topCard","shift","advanceToOtherPlayer","advanceFromPartialWinner","splice","moveCount","random","drawCard","then","checkPartialWinner","catch","error","console","log","winner","whoWins"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA;;IAEMA,I;;;AAEJ,gBAAYC,OAAZ,EAAqB;AAAA;;AAAA;;AAGnBA,gBAAYA,UAAU,EAAtB;;AAEAC,oBAAgBC,IAAhB,QAA2BF,OAA3B;AACAG,sBAAkBD,IAAlB,QAA6BF,OAA7B;AACAI,mBAAeF,IAAf,QAA0BF,OAA1B;AACAK,qBAAiBH,IAAjB,QAA4BF,OAA5B;;AAEA,UAAKM,YAAL,CAAkBC,EAAlB,CAAqB,eAArB,EAAsCC,uBAAuBC,IAAvB,OAAtC;AAVmB;AAWpB;;;;4BAMO;AACN,WAAKC,IAAL,CAAU,eAAV;AACA,UAAIC,QAAQ,KAAKC,IAAL,CAAUC,YAAV,EAAZ;AACAC,mBAAaZ,IAAb,CAAkB,IAAlB,EAAwBS,KAAxB;AACA,WAAKL,YAAL,CAAkBS,gBAAlB,CAAmCJ,KAAnC;AACAK,gBAAUd,IAAV,CAAe,IAAf;AACA,WAAKe,YAAL,CAAkBC,YAAlB,CAA+B,KAAKZ,YAAL,CAAkBa,eAAlB,EAA/B;;AAEA;AACAC,aAAOC,MAAP,CAAc,KAAKC,OAAnB;;AAEAC,iBAAWC,SAASf,IAAT,CAAc,IAAd,CAAX,EAAgC,CAAhC;AACA,WAAKC,IAAL,CAAU,cAAV;AACD;;;+BAEUe,M,EAAQ;AACjB,aAAO,KAAKC,MAAL,CAAYC,UAAZ,CAAuBF,MAAvB,CAAP;AACD;;;+BAEU;AACT,UAAI,KAAKnB,YAAL,CAAkBsB,SAAlB,KAAgC,CAApC,EAAuC;AACrC,aAAKlB,IAAL,CAAU,wBAAV;AACD;AACD,aAAO,KAAKJ,YAAL,CAAkBa,eAAlB,EAAP;AACD;;;6BAEQU,I,EAAM;AACb,WAAKZ,YAAL,CAAkBC,YAAlB,CAA+BW,IAA/B;AACD;;;+BAEU;AAAA;;AACT,WAAKjB,IAAL,CAAUkB,kBAAV;AACA,WAAKxB,YAAL,CAAkBwB,kBAAlB;AACA,WAAKb,YAAL,CAAkBa,kBAAlB;AACA,WAAKC,KAAL,CAAWD,kBAAX;AACA,WAAKA,kBAAL;AACA,WAAKR,OAAL,CAAaU,OAAb,CAAqB;AAAA,eAAUP,OAAOQ,IAAP,CAAYH,kBAAZ,EAAV;AAAA,OAArB;;AAEA,WAAKlB,IAAL,CAAUG,gBAAV,CAA2B,KAAKT,YAAL,CAAkBO,YAAlB,EAA3B;AACA,WAAKD,IAAL,CAAUG,gBAAV,CAA2B,KAAKE,YAAL,CAAkBJ,YAAlB,EAA3B;AACA,WAAKS,OAAL,CAAaU,OAAb,CAAqB;AAAA,eACjB,OAAKpB,IAAL,CAAUG,gBAAV,CAA2BU,OAAOQ,IAAP,CAAYpB,YAAZ,EAA3B,CADiB;AAAA,OAArB;;AAGA,aAAO,KAAK,KAAKqB,WAAL,CAAiB;AAC3BZ,iBAAS,KAAKA,OADa;AAE3BV,cAAM,KAAKA,IAFgB;AAG3BmB,eAAO,KAAKA,KAHe;AAI3BL,gBAAQ,KAAKA,MAJc;AAK3BS,wBAAgB,KAAKA,cALM;AAM3BC,wBAAgB,KAAKA;AANM,OAAjB,CAAL,GAAP;AAQD;;;wBAvDmB;AAClB,aAAO,KAAKC,aAAL,CAAmB,KAAKC,kBAAxB,CAAP;AACD;;;;;;AAyDH,SAASrC,eAAT,CAAyBD,OAAzB,EAAkC;AAChC,OAAK+B,KAAL,GAAa/B,QAAQ+B,KAAR,IAAiB,qBAA9B;AACA,OAAKA,KAAL,CAAWQ,UAAX,CAAsB,IAAtB;AACA,OAAKJ,cAAL,GAAsBnC,QAAQmC,cAAR,IACpB,KAAKJ,KAAL,CAAWS,qBADb;AAEA,OAAKJ,cAAL,GAAsBpC,QAAQoC,cAAR,IACpB,KAAKL,KAAL,CAAWU,qBADb;AAEA,OAAKC,aAAL,GAAqB1C,QAAQ0C,aAAR,KAA0BC,SAA1B,GACnB3C,QAAQ0C,aADW,GACK,KAAKX,KAAL,CAAWa,oBADrC;AAED;;AAED,SAASzC,iBAAT,CAA2BH,OAA3B,EAAoC;AAAA;;AAClC,OAAKsB,OAAL,GAAe,EAAf;AACA,MAAItB,QAAQsB,OAAZ,EAAqB;AACnBtB,YAAQsB,OAAR,CAAgBU,OAAhB,CAAwB,kBAAU;AAChC,aAAKV,OAAL,CAAauB,IAAb,CAAkBpB,MAAlB;AACAA,aAAOc,UAAP;AACD,KAHD;AAID;AACD,OAAKF,aAAL,GAAqB,KAAKf,OAAL,CAAawB,KAAb,EAArB;AACA,OAAKR,kBAAL,GAA0B,CAA1B;AACA,OAAKS,WAAL,GAAmBJ,SAAnB;AACD;;AAED,SAASvC,cAAT,CAAwBJ,OAAxB,EAAiC;AAC/B,OAAKY,IAAL,GAAYZ,QAAQY,IAAR,IAAgB,oBAA5B;AACA;AACA;AACA,MAAI,CAACZ,QAAQY,IAAb,EAAmB;AACjB,QAAIoC,aAAaC,KAAKC,KAAL,CAAW,CAAC,KAAK5B,OAAL,CAAa6B,MAAb,GAAsB,CAAvB,IAC1B,KAAKf,cADU,CAAjB;AAEA,WAAO,EAAEY,UAAF,IAAgB,CAAvB,EAA0B;AACxB,WAAKpC,IAAL,CAAUG,gBAAV,CAA2B,qBAAWF,YAAX,EAA3B;AACD;AACF;AACD,OAAKP,YAAL,GAAoB,4BAApB;AACA,OAAKW,YAAL,GAAoB,4BAApB;AACD;;AAED,SAASZ,gBAAT,CAA0BL,OAA1B,EAAmC;AACjC,MAAIA,QAAQ0B,MAAZ,EAAoB;AAClB,SAAKA,MAAL,GAAc1B,QAAQ0B,MAAtB;AACA,SAAKA,MAAL,CAAYa,UAAZ,CAAuB,IAAvB;AACD;AACF;;AAED,SAAS/B,sBAAT,GAAkC;AAChC,MAAI,KAAKF,YAAL,CAAkBsB,SAAlB,KAAgC,CAApC,EAAuC;AACrC,SAAKlB,IAAL,CAAU,mBAAV;AACA,QAAI0C,YAAY,KAAKnC,YAAL,CAAkBJ,YAAlB,EAAhB;AAAA,QACIwC,UAAUD,UAAUE,KAAV,EADd;AAEAxC,iBAAaZ,IAAb,CAAkB,IAAlB,EAAwBkD,SAAxB;AACA,SAAK9C,YAAL,CAAkBS,gBAAlB,CAAmCqC,SAAnC;AACA,SAAKnC,YAAL,CAAkBC,YAAlB,CAA+BmC,OAA/B;AACA,SAAK3C,IAAL,CAAU,kBAAV;AACD;AACF;;AAED,SAAS6C,oBAAT,GAAgC;AAC9B,MAAI,KAAKjB,kBAAL,GAA0B,KAAKD,aAAL,CAAmBc,MAAnB,GAA4B,CAA1D,EAA6D;AAC3D,MAAE,KAAKb,kBAAP;AACD,GAFD,MAEO;AACL,SAAKA,kBAAL,GAA0B,CAA1B;AACD;AACF;;AAED,SAASkB,wBAAT,GAAoC;AAClC,OAAKnB,aAAL,CAAmBoB,MAAnB,CAA0B,KAAKnB,kBAA/B,EAAmD,CAAnD;AACA,MAAI,KAAKA,kBAAL,KAA4B,KAAKD,aAAL,CAAmBc,MAAnD,EAA2D;AACzD,SAAKb,kBAAL,GAA0B,CAA1B;AACD;AACF;;AAED,SAASxB,YAAT,CAAsBH,KAAtB,EAA6B;AAC3B;AACA;AACA,MAAIiB,YAAYjB,MAAMwC,MAAtB;AAAA,MACIO,YAAYT,KAAKC,KAAL,CAAWtB,aAAa,IAAIqB,KAAKU,MAAL,EAAjB,CAAX,CADhB;AAEA,SAAO,EAAED,SAAF,IAAe,CAAtB,EAAyB;AACvB/C,UAAM8C,MAAN,CAAaR,KAAKC,KAAL,CAAWtB,YAAYqB,KAAKU,MAAL,EAAvB,CAAb,EAAoD,CAApD,EAAuDhD,MAAM2C,KAAN,EAAvD;AACD;AACF;;AAED,SAAStC,SAAT,GAAqB;AACnB;AACA,MAAIY,YAAY,KAAKO,cAArB;AACA,SAAO,EAAEP,SAAF,IAAe,CAAtB,EAAyB;AACvB,SAAKN,OAAL,CAAaU,OAAb,CAAqB,UAAUP,MAAV,EAAkB;AACrCA,aAAOmC,QAAP;AACD,KAFD;AAGD;AACF;;AAED,SAASpC,QAAT,GAAoB;AAAA;;AAClB,OAAKO,KAAL,CAAWP,QAAX,GACKqC,IADL,CACU,YAAM;AACV,QAAIC,mBAAmB5D,IAAnB,QAAJ,EAAmC;AACjCsD,+BAAyBtD,IAAzB;AACD,KAFD,MAEO;AACLqD,2BAAqBrD,IAArB;AACD;AACD,QAAI,OAAKmC,aAAL,CAAmBc,MAAnB,KAA8B,CAA9B,IACA,OAAKJ,WAAL,IAAoB,CAAC,OAAKL,aAD9B,EAC6C;AAC3C;AACAtB,aAAOC,MAAP;AACA,aAAKX,IAAL,CAAU,eAAV,EAA2B,OAAKqC,WAAhC;AACD,KALD,MAKO;AACLxB,iBAAWC,SAASf,IAAT,QAAX,EAAgC,CAAhC;AACA,aAAKC,IAAL,CAAU,gBAAV;AACD;AACF,GAhBL,EAiBKqD,KAjBL,CAiBW,UAAUC,KAAV,EAAiB;AACtBC,YAAQC,GAAR,CAAYF,KAAZ;AACD,GAnBL;AAoBD;;AAED,SAASF,kBAAT,GAA8B;AAC5B,MAAIK,SAAS,KAAKpC,KAAL,CAAWqC,OAAX,EAAb;AACA,MAAID,MAAJ,EAAY;AACV,QAAI,CAAC,KAAKpB,WAAV,EAAuB;AACrB,WAAKA,WAAL,GAAmBoB,MAAnB;AACD;AACD,SAAKzD,IAAL,CAAU,kBAAV,EAA8ByD,MAA9B;AACA,WAAO,IAAP;AACD;AACF;kBACcpE,I","file":"Game.js","sourceRoot":"../../../../src"}